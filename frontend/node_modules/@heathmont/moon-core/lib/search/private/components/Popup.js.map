{"version":3,"sources":["../../../../src/search/private/components/Popup.tsx"],"names":["StyledPopup","styled","div","theme","base","breakpoint","color","space","zIndex","background","position","padding","borderRadius","popupConfig","fontSize","lineHeight","dialog","medium","top","right","bottom","left","goten","Popup","children","closeButton","closePopup","isOpen","title","ref","escapeListener","e","key","clickListener","stopPropagation","current","contains","target","document","addEventListener","removeEventListener"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useRef } from 'react';\nimport styled from 'styled-components';\nimport { mq, rem } from '@heathmont/moon-utils';\n\nimport { FlexWrapper, ModalClose } from './Styles';\nimport { popupConfig } from './settings';\n\nexport const StyledPopup = styled.div(\n  ({ theme: { base, breakpoint, color, space, zIndex } }) => ({\n    background: 'transparent',\n    position: 'relative',\n    padding: 0,\n    borderRadius: rem(popupConfig.borderRadius),\n    fontSize: rem(base.fontSize),\n    lineHeight: rem(24),\n    ['&.popup-open']: {\n      zIndex: zIndex.dialog,\n    },\n    [mq(breakpoint.medium, 'max-width')]: {\n      ['&.popup-open']: {\n        position: 'fixed',\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        background: color.goten[100],\n        padding: rem(space.default),\n      },\n    },\n  })\n);\n\nexport type PopupProps = {\n  children?: JSX.Element;\n  closeButton?: JSX.Element;\n  closePopup: () => void;\n  isOpen: boolean;\n  title: JSX.Element;\n};\n\nconst Popup: React.FC<PopupProps> = ({\n  children,\n  closeButton,\n  closePopup,\n  isOpen,\n  title,\n}) => {\n  const ref = useRef(null);\n  const escapeListener = useCallback((e: KeyboardEvent) => {\n    if (e.key === 'Escape') {\n      closePopup();\n    }\n  }, []);\n\n  const clickListener = useCallback(\n    (e: MouseEvent) => {\n      e.stopPropagation();\n      if (ref.current && !(ref.current! as any).contains(e.target)) {\n        closePopup();\n      }\n    },\n    [ref.current]\n  );\n\n  useEffect(() => {\n    // Attach the listeners on component mount.\n    document.addEventListener('click', clickListener);\n    document.addEventListener('keyup', escapeListener);\n    // Detach the listeners on component unmount.\n    return () => {\n      document.removeEventListener('click', clickListener);\n      document.removeEventListener('keyup', escapeListener);\n    };\n  }, []);\n\n  return (\n    <StyledPopup className={isOpen ? 'popup-open' : ''} ref={ref}>\n      <FlexWrapper>\n        {title}\n        {!!closeButton && isOpen ? (\n          <ModalClose onClick={closePopup}>{closeButton}</ModalClose>\n        ) : null}\n      </FlexWrapper>\n      {isOpen && children && <FlexWrapper>{children}</FlexWrapper>}\n    </StyledPopup>\n  );\n};\n\nexport default Popup;\n"],"file":"Popup.js"}