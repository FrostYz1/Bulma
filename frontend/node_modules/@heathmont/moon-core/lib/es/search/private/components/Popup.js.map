{"version":3,"sources":["../../../../../src/search/private/components/Popup.tsx"],"names":["React","useCallback","useEffect","useRef","styled","mq","rem","FlexWrapper","ModalClose","popupConfig","StyledPopup","div","theme","base","breakpoint","color","space","zIndex","background","position","padding","borderRadius","fontSize","lineHeight","dialog","medium","top","right","bottom","left","goten","Popup","children","closeButton","closePopup","isOpen","title","ref","escapeListener","e","key","clickListener","stopPropagation","current","contains","target","document","addEventListener","removeEventListener"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useRef } from 'react';\nimport styled from 'styled-components';\nimport { mq, rem } from '@heathmont/moon-utils';\n\nimport { FlexWrapper, ModalClose } from './Styles';\nimport { popupConfig } from './settings';\n\nexport const StyledPopup = styled.div(\n  ({ theme: { base, breakpoint, color, space, zIndex } }) => ({\n    background: 'transparent',\n    position: 'relative',\n    padding: 0,\n    borderRadius: rem(popupConfig.borderRadius),\n    fontSize: rem(base.fontSize),\n    lineHeight: rem(24),\n    ['&.popup-open']: {\n      zIndex: zIndex.dialog,\n    },\n    [mq(breakpoint.medium, 'max-width')]: {\n      ['&.popup-open']: {\n        position: 'fixed',\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        background: color.goten[100],\n        padding: rem(space.default),\n      },\n    },\n  })\n);\n\nexport type PopupProps = {\n  children?: JSX.Element;\n  closeButton?: JSX.Element;\n  closePopup: () => void;\n  isOpen: boolean;\n  title: JSX.Element;\n};\n\nconst Popup: React.FC<PopupProps> = ({\n  children,\n  closeButton,\n  closePopup,\n  isOpen,\n  title,\n}) => {\n  const ref = useRef(null);\n  const escapeListener = useCallback((e: KeyboardEvent) => {\n    if (e.key === 'Escape') {\n      closePopup();\n    }\n  }, []);\n\n  const clickListener = useCallback(\n    (e: MouseEvent) => {\n      e.stopPropagation();\n      if (ref.current && !(ref.current! as any).contains(e.target)) {\n        closePopup();\n      }\n    },\n    [ref.current]\n  );\n\n  useEffect(() => {\n    // Attach the listeners on component mount.\n    document.addEventListener('click', clickListener);\n    document.addEventListener('keyup', escapeListener);\n    // Detach the listeners on component unmount.\n    return () => {\n      document.removeEventListener('click', clickListener);\n      document.removeEventListener('keyup', escapeListener);\n    };\n  }, []);\n\n  return (\n    <StyledPopup className={isOpen ? 'popup-open' : ''} ref={ref}>\n      <FlexWrapper>\n        {title}\n        {!!closeButton && isOpen ? (\n          <ModalClose onClick={closePopup}>{closeButton}</ModalClose>\n        ) : null}\n      </FlexWrapper>\n      {isOpen && children && <FlexWrapper>{children}</FlexWrapper>}\n    </StyledPopup>\n  );\n};\n\nexport default Popup;\n"],"file":"Popup.js"}