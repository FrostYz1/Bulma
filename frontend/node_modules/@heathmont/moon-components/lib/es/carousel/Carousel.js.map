{"version":3,"sources":["../../../src/carousel/Carousel.tsx"],"names":["React","styled","IconChevronLeft","Reel","withHorizontalScroll","CarouselControl","CarouselControlCaption","rem","currentScrollingSpec","CarouselWrapper","div","position","width","ItemsScrollWrapper","withComponent","horizontalEdgeGap","padding","margin","hideScrollbar","display","scrollbarWidth","scrollSnapType","scrollSnapDestination","scrollSnapPointsX","defaultProps","space","CarouselScrollItem","li","scrollSnapCoordinate","scrollSnapAlign","DefaultScrollToLeftButton","scrollLeftCaption","disabled","rest","DefaultScrollToRightButton","scrollRightCaption","Carousel","items","step","scrollTo","scrollToLeftButton","scrollToRightButton","scrollStep","itemRef","scrollLeftToStep","scrollRightToStep","containerRef","scrollToIndex","canScrollLeft","canScrollRight","firstVisibleIndex","lastVisibleIndex","useEffect","length","scrollToStep","map","item","index"],"mappings":"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","sourcesContent":["import React from 'react';\nimport styled, { CSSObject } from 'styled-components';\nimport { SpaceProps } from '@heathmont/moon-themes';\n\nimport IconChevronLeft from '../private/icons/IconChevronLeft';\nimport Reel from '../reel/Reel';\nimport { withHorizontalScroll } from '../withHorizontalScroll/withHorizontalScroll';\n\nimport { CarouselControl, CarouselControlCaption } from './control';\nimport { rem } from '@heathmont/moon-utils';\n/**\n * Settings\n *\n * If a browser supports the new scroll snap specification, use the styles\n * and disable legacy spec (keyed with ðŸ‘´)\n */\nconst currentScrollingSpec = '@supports (scroll-snap-align: start)';\n\n/**\n * Carousel\n *\n * The outer Carousel container, allowing absolute positioning inside.\n *\n * `<any>` justification: https://coingaming.atlassian.net/browse/SPO-4963.\n */\nconst CarouselWrapper = styled.div<any>({\n  position: 'relative',\n  width: '100%',\n});\n\n/**\n * Carousel Scroll\n *\n * The list of Carousel Items, controlling overflow and scroll behavior.\n */\nconst ItemsScrollWrapper = styled(Reel.withComponent('ul'))<{\n  horizontalEdgeGap: CarouselProps['horizontalEdgeGap'];\n  hideScrollbar: CarouselProps['hideScrollbar'];\n}>(\n  ({ horizontalEdgeGap }) =>\n    horizontalEdgeGap && {\n      padding: `0 ${rem(horizontalEdgeGap)}`,\n      margin: `0 ${rem(-horizontalEdgeGap)}`,\n    },\n  ({ hideScrollbar }) =>\n    hideScrollbar && {\n      '&::-webkit-scrollbar': { display: 'none' },\n      '-ms-overflow-style': 'none',\n      scrollbarWidth: 'none',\n    },\n  {\n    scrollSnapType: 'mandatory',\n    scrollSnapDestination: '0 50%',\n    scrollSnapPointsX: 'repeat(100%)',\n    [currentScrollingSpec]: {\n      scrollSnapType: 'x mandatory',\n      scrollSnapDestination: 'unset' /* ðŸ‘´ */,\n      scrollSnapPointsX: 'unset' /* ðŸ‘´ */,\n    },\n  }\n);\n\nItemsScrollWrapper.defaultProps = {\n  space: 'default',\n};\n\n/**\n * Carousel Scroll Item\n *\n * The individual `list-item` of Carousel Scroll\n */\nconst CarouselScrollItem = styled.li<any>({\n  scrollSnapCoordinate: '0 0',\n  [currentScrollingSpec]: {\n    scrollSnapAlign: 'center',\n    scrollSnapCoordinate: 'unset' /* ðŸ‘´ */,\n  },\n});\n\nconst DefaultScrollToLeftButton = ({\n  scrollLeftCaption = 'Scroll Left',\n  disabled = false,\n  ...rest\n}) =>\n  disabled ? null : (\n    <CarouselControl {...rest}>\n      <CarouselControlCaption>{scrollLeftCaption}</CarouselControlCaption>\n      <IconChevronLeft />\n    </CarouselControl>\n  );\n\nconst DefaultScrollToRightButton = ({\n  scrollRightCaption = 'Scroll Right',\n  disabled = false,\n  ...rest\n}) =>\n  disabled ? null : (\n    <CarouselControl {...rest}>\n      <CarouselControlCaption>{scrollRightCaption}</CarouselControlCaption>\n      <IconChevronLeft />\n    </CarouselControl>\n  );\n\ninterface CarouselProps {\n  items: any;\n  scrollToLeftButton?: any;\n  scrollToRightButton?: any;\n  scrollLeftCaption?: any;\n  scrollRightCaption?: any;\n  step?: number;\n  scrollTo?: number;\n  space?: SpaceProps | CSSObject['margin'];\n  horizontalEdgeGap?: number | boolean;\n  hideScrollbar?: boolean;\n}\n\nconst Carousel: React.FC<CarouselProps> = ({\n  items,\n  step,\n  scrollTo,\n  scrollToLeftButton,\n  scrollToRightButton,\n  scrollLeftCaption,\n  scrollRightCaption,\n  space,\n  horizontalEdgeGap,\n  hideScrollbar,\n}) => {\n  const {\n    itemRef,\n    scrollLeftToStep,\n    scrollRightToStep,\n    containerRef,\n    scrollToIndex,\n    canScrollLeft,\n    canScrollRight,\n    firstVisibleIndex,\n    lastVisibleIndex,\n  } = withHorizontalScroll({ scrollStep: step || 5 });\n\n  React.useEffect(() => {\n    if (!scrollTo) {\n      return;\n    }\n    // We scroll for another extra item because we defined our THRESHOLD = 0.75;\n    // It means that item will be visible for 75%.\n    // We scroll one more to guarantee 100% visibility.\n    // \"items.length - 1\" because indices start from 0.\n    if (scrollTo && scrollTo < items.length - 1) {\n      scrollToIndex(scrollTo + 1);\n    }\n    // No point for scroll another extra item because that's the last one\n    if (scrollTo && scrollTo === items.length - 1) {\n      scrollToIndex(scrollTo);\n    }\n  }, []);\n\n  return (\n    <CarouselWrapper>\n      {scrollToLeftButton ? (\n        scrollToLeftButton({\n          scrollToStep: scrollLeftToStep,\n          disabled: !canScrollLeft,\n        })\n      ) : (\n        <DefaultScrollToLeftButton\n          onClick={scrollLeftToStep}\n          disabled={!canScrollLeft}\n          scrollLeftCaption={scrollLeftCaption}\n        />\n      )}\n      <ItemsScrollWrapper\n        space={space}\n        ref={containerRef}\n        horizontalEdgeGap={horizontalEdgeGap}\n        hideScrollbar={hideScrollbar}\n      >\n        {typeof items === 'function'\n          ? items({ firstVisibleIndex, lastVisibleIndex }).map(\n              (item: React.ReactNode, index: string | number | undefined) => (\n                // eslint-disable-next-line react/no-array-index-key\n                <CarouselScrollItem key={index} ref={itemRef}>\n                  {item}\n                </CarouselScrollItem>\n              )\n            )\n          : items.map(\n              (item: React.ReactNode, index: string | number | undefined) => (\n                // eslint-disable-next-line react/no-array-index-key\n                <CarouselScrollItem key={index} ref={itemRef}>\n                  {item}\n                </CarouselScrollItem>\n              )\n            )}\n      </ItemsScrollWrapper>\n      {scrollToRightButton ? (\n        scrollToRightButton({\n          scrollToStep: scrollRightToStep,\n          disabled: !canScrollRight,\n        })\n      ) : (\n        <DefaultScrollToRightButton\n          onClick={scrollRightToStep}\n          disabled={!canScrollRight}\n          scrollRightCaption={scrollRightCaption}\n        />\n      )}\n    </CarouselWrapper>\n  );\n};\n\nexport default Carousel;\n"],"file":"Carousel.js"}