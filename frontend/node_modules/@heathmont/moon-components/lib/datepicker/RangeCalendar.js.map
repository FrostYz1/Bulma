{"version":3,"sources":["../../src/datepicker/RangeCalendar.tsx"],"names":["RangeCalendar","initialStartDate","startDate","initialEndDate","endDate","onDateChange","config","range","translations","hasClickedOutside","setIsOpen","setPlaceholder","React","useState","hoveredDate","undefined","cursorDate","Date","fallbackStartDate","fallbackEndDate","datesState","setDatesState","useEffect","apply","selectDay","selectedDate","newEndDate","newStartDate","setStartDate","setEndDate","reset","hoverDay","selectRange","newRange","nextMonth","prevMonth","firstMonth","date","weekStartsOn","nextMonthCurrentDate","secondMonth","labels","firstMonthLabel","monthLabelFormat","firstMonthYearLabel","yearLabelFormat","secondMonthLabel","secondMonthYearLabel","weekDayLabels"],"mappings":"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","sourcesContent":["import React from 'react';\nimport addMonths from 'date-fns/addMonths';\nimport subMonths from 'date-fns/subMonths';\nimport endOfDay from 'date-fns/endOfDay';\nimport format from 'date-fns/format';\nimport isAfter from 'date-fns/isAfter';\nimport isSameDay from 'date-fns/isSameDay';\nimport startOfDay from 'date-fns/startOfDay';\nimport isValid from 'date-fns/isValid';\n\nimport { getMonthDays } from './private/helpers/getMonthDays';\nimport { Picker } from './private/Picker';\nimport { getWeekDayLabels } from './private/helpers/getWeekDayLabels';\nimport { getDatesFromRange } from './private/helpers/getDatesFromRange';\nimport { getPlaceholder } from './private/helpers/getPlaceholder';\n\nimport type { DatesRange } from './private/helpers/getDatesFromRange';\n\nexport type DatepickerState = {\n  startDate?: Date;\n  endDate?: Date;\n  range?: DatesRange;\n  hoveredDate?: Date;\n  cursorDate: Date; // just to navigate between months\n};\n\nexport type WeekStartsOn = 0 | 1 | 2 | 3 | 4 | 5 | 6 | undefined;\n\nexport interface Translations {\n  placeholder: any;\n  apply: any;\n  reset: any;\n  lastMonth: any;\n  lastWeek: any;\n  last24hours: any;\n  yesterday: any;\n  today: any;\n  tomorrow: any;\n  thisWeek: any;\n  nextWeek: any;\n  thisMonth: any;\n  nextMonth: any;\n}\n\nexport interface Config {\n  format?: string;\n  monthLabelFormat?: string;\n  yearLabelFormat?: string;\n  weekStartsOn?: WeekStartsOn;\n  withHoursAndMinutes?: boolean;\n  onlyFuture?: boolean;\n  without24AndToday?: boolean;\n  locale?: any;\n  ranges?: DatesRange[];\n}\n\nexport interface DateRangePickerProps {\n  isOpenByDefault?: boolean;\n  format?: string;\n  startDate?: Date;\n  endDate?: Date;\n  range?: DatesRange;\n  hasClickedOutside?: boolean;\n  setIsOpen?: any;\n  setPlaceholder?: any;\n  onDateChange: ({\n    startDate,\n    endDate,\n    range,\n  }: {\n    startDate?: Date;\n    endDate?: Date;\n    range?: DatesRange;\n  }) => any;\n  config?: Config;\n  translations?: Translations;\n}\n\nconst RangeCalendar: React.FC<DateRangePickerProps> = ({\n  startDate: initialStartDate,\n  endDate: initialEndDate,\n  onDateChange,\n  config,\n  range,\n  translations,\n  hasClickedOutside,\n  setIsOpen,\n  setPlaceholder,\n}) => {\n  const [datesState, setDatesState] = React.useState<DatepickerState>({\n    startDate: initialStartDate,\n    endDate: initialEndDate,\n    range,\n    hoveredDate: undefined,\n    cursorDate: initialStartDate ? new Date(initialStartDate) : new Date(),\n    // get \"startDate\" and \"endDate\" if \"range\" is defined\n    ...getDatesFromRange({\n      range,\n      config,\n      fallbackStartDate: initialStartDate,\n      fallbackEndDate: initialEndDate,\n    }),\n  });\n\n  React.useEffect(() => {\n    if (hasClickedOutside) {\n      onDateChange({\n        startDate: datesState.startDate,\n        endDate: datesState.endDate,\n        range: datesState.range,\n      });\n      setPlaceholder(\n        getPlaceholder({\n          startDate: datesState.startDate,\n          endDate: datesState.endDate,\n          range: datesState.range,\n          config,\n          translations,\n        }),\n      );\n      setIsOpen(false);\n    }\n  });\n\n  const apply = () => {\n    onDateChange({\n      startDate: datesState.startDate,\n      endDate: datesState.endDate,\n      range: datesState.range,\n    });\n    setPlaceholder(\n      getPlaceholder({\n        startDate: datesState.startDate,\n        endDate: datesState.endDate,\n        range: datesState.range,\n        config,\n        translations,\n      }),\n    );\n    setIsOpen(false);\n  };\n\n  const selectDay = (selectedDate: Date) => {\n    if (\n      datesState.startDate\n      && !datesState.endDate\n      && (isSameDay(datesState.startDate, selectedDate)\n        || isAfter(selectedDate, datesState.startDate))\n    ) {\n      const newEndDate = endOfDay(selectedDate);\n      setDatesState({\n        ...datesState,\n        hoveredDate: undefined,\n        endDate: newEndDate,\n        range: '',\n      });\n    } else if (datesState.startDate && datesState.endDate) {\n      const newStartDate = startOfDay(selectedDate);\n      setDatesState({\n        ...datesState,\n        hoveredDate: undefined,\n        startDate: newStartDate,\n        endDate: undefined,\n        range: '',\n      });\n    } else {\n      const newStartDate = startOfDay(selectedDate);\n      setDatesState({\n        ...datesState,\n        hoveredDate: undefined,\n        startDate: newStartDate,\n        range: '',\n      });\n    }\n  };\n\n  const setStartDate = (startDate: Date) => {\n    if (isValid(startDate) && startDate) {\n      setDatesState({\n        ...datesState,\n        startDate,\n        range: '',\n      });\n    }\n  };\n\n  const setEndDate = (endDate: Date) => {\n    if (isValid(endDate) && endDate) {\n      setDatesState({\n        ...datesState,\n        endDate,\n        range: '',\n      });\n    }\n  };\n\n  const reset = () => {\n    setDatesState({\n      startDate: undefined,\n      endDate: undefined,\n      range: '',\n      hoveredDate: undefined,\n      cursorDate: new Date(),\n    });\n  };\n\n  // TODO - onClickOutsideHandler\n\n  const hoverDay = (hoveredDate: Date) => {\n    if (\n      datesState.startDate\n      && !datesState.endDate\n      && !isSameDay(hoveredDate, datesState.startDate)\n      && isAfter(hoveredDate, datesState.startDate)\n    ) {\n      setDatesState({\n        ...datesState,\n        hoveredDate,\n      });\n    }\n  };\n\n  const selectRange = (newRange: DatesRange) => {\n    const { startDate, endDate } = getDatesFromRange({\n      range: newRange,\n      fallbackStartDate: datesState.startDate,\n      fallbackEndDate: datesState.endDate,\n      config,\n    });\n    setDatesState({\n      ...datesState,\n      startDate,\n      endDate,\n      hoveredDate: undefined,\n      range: newRange,\n      cursorDate: startDate || datesState.cursorDate,\n    });\n  };\n\n  const nextMonth = () => {\n    setDatesState({\n      ...datesState,\n      cursorDate: addMonths(datesState.cursorDate, 2),\n    });\n  };\n\n  const prevMonth = () => {\n    setDatesState({\n      ...datesState,\n      cursorDate: subMonths(datesState.cursorDate, 2),\n    });\n  };\n\n  const firstMonth = getMonthDays({\n    date: datesState.cursorDate,\n    weekStartsOn: config && config.weekStartsOn,\n  });\n\n  const nextMonthCurrentDate = addMonths(datesState.cursorDate, 1);\n  const secondMonth = getMonthDays({\n    date: nextMonthCurrentDate,\n    weekStartsOn: config && config.weekStartsOn,\n  });\n\n  const labels = {\n    firstMonthLabel: format(\n      datesState.cursorDate,\n      (config && config.monthLabelFormat) || 'MMMM',\n      config,\n    ),\n    firstMonthYearLabel: format(\n      datesState.cursorDate,\n      (config && config.yearLabelFormat) || 'yyyy',\n      config,\n    ),\n    secondMonthLabel: format(\n      nextMonthCurrentDate,\n      (config && config.monthLabelFormat) || 'MMMM',\n      config,\n    ),\n    secondMonthYearLabel: format(\n      nextMonthCurrentDate,\n      (config && config.yearLabelFormat) || 'yyyy',\n      config,\n    ),\n    weekDayLabels: config && getWeekDayLabels(config),\n  };\n\n  return (\n    <Picker\n      datesState={datesState}\n      labels={labels}\n      translations={translations}\n      config={config}\n      onDayClick={selectDay}\n      firstMonth={firstMonth}\n      secondMonth={secondMonth}\n      onDayMouseEnter={hoverDay}\n      selectRange={selectRange}\n      nextMonth={nextMonth}\n      prevMonth={prevMonth}\n      setStartDate={setStartDate}\n      setEndDate={setEndDate}\n      onDateChange={onDateChange}\n      apply={apply}\n      reset={reset}\n    />\n  );\n};\n\nexport default RangeCalendar;\n"],"file":"RangeCalendar.js"}